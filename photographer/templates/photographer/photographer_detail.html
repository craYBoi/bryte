{% extends "base.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block photographer_detail %}
  <div id="photographer_intro" class="medium_padding medium_padding_bot">
    <div class="small_padding row">
      <img src="{{ object.profile.url }}" width="100px">
    </div>
    <div class="row small_padding">
      <h4 class="feature_title text-center bold">{{object.first_name}} {{object.last_name}}</h4>
      <ul class="small_padding">
        <li>{{ object.school }}</li>
        <li class="small_font">{{ object.location }}</li>
      </ul>
    </div>

    <div class="medium_padding row photographer_detail_text">
        <ul class="list-unstyled">
          <strong><li>
            {% if has_rating %}
              <img src="{% static rating_static_url %}" width='150px' alt="Rating Not Available"> &nbsp({{ object.rating_set.count }})
            {% else %}
              Be the first to Rate me!
            {% endif %}
          </li></strong>
          <li class="medium_padding"><a href="{% url 'reserve_detail' object.slug %}" id="photographer_reserve"><button class="btn btn-medium">Reserve</button></a></li>
          <li><div class="fb-like small_padding" data-href="{{ page_url }}" data-layout="button" data-action="like" data-show-faces="true" data-share="true"></div></li>
        </ul>
    </div>
  </div>
  <hr>

<div class="container">
  <!-- menu -->
  <div class="row">
    <ul class="list-inline text-center center_menu">
      {# <li><a href="#photographer_packages" id="photographer_packages_button" class="yellow_hover">Packages</a></li> #}
      <li><a href="#photographer_packages" id="photographer_packages_button" class="yellow_hover">Packages</a></li>
      <li><a href="#photographer_gallery" id="photographer_gallery_button" class="yellow_hover">Works</a></li>
      <li><a href="#photographer_reviews" id="photographer_reviews_button" class="yellow_hover">Reviews</a></li>
    </ul>
  </div>

  <!-- package -->
  <div class="row medium_padding" id='photographer_packages'>
    <div class="col-sm-6">
      <div class="thumbnail xsmall_padding_bot">
        <div class="thumbnail small_margin_all">
            <div class="caption">
              <h2 class="feature_title bold text-center yellow">$125</h2>
                <ul class="package_list small_font">
                  <li>Willing to travel up to 20 miles</li>
                </ul>  
            </div>
        </div>
      <h3 class="text-center">Real Estate Photography - Standard</h3>
      </div>
    </div>
    <div class="col-sm-6">
      <div class="thumbnail xsmall_padding_bot">
        <div class="thumbnail small_margin_all">
            <div class="caption">
              <h2 class="feature_title bold text-center yellow">$75</h2>
                <ul class="package_list small_font">
                <li>Willing to travel up to 15 miles</li>
                </ul>  
            </div>
        </div>
      <h3 class="text-center">Headshot - Basic</h3>
      </div>
    </div>
  </div>


  <!-- packages
  <div class="row small_padding" id="photographer_packages">
    {% for package in object.package_set.all %}
      <div class="{{ col_url }}" style="text-align: center">
        <div class="thumbnail">
        <div class="thumbnail">
            <div class="caption">
              <h2 class="feature_title bold">${{ package.price }}</h2>
                <ul style="list-style-image: url({% static 'img/star_bullet.png' %});" class="photographer_packages_list">
                  {% for feature in package.packagefeature_set.all %}
                  <li>{{ feature.feature_text }}</li>
                  {% endfor %}
                </ul>  
            </div>
        </div>
        <h3>{{ package.title }}</h3>
        </div>
      </div>
    {% endfor %}
  </div> -->


  <!-- gallery -->
  <div class="row medium_padding" id="photographer_gallery">
		<div class="grid">
		  <div class="grid-sizer"></div>
		 	 	{% for img in object.photographerimage_set.all %}
				  <div class="grid-item">
				    <img src= {{ img.image.url }} />
				  </div>
		  	{% endfor %}
		</div>
  </div>


  <!-- rating & comment -->
  <hr>

  <div class="row" id='photographer_reviews'>
    <div class="col-sm-8 col-xs-10 col-sm-offset-0 col-xs-offset-1">
    <h3>{{ object.rating_set.count }} Reviews</h3>
    <div class="content_wrapper">
      <ul class="comment_style">
      {% for rating_url, rating in ratings %}
        <li>
          <div class="row">
          <div class="col-sm-3"><img class="comment_rating" src="{% static rating_url %}" width='100px'></div>
          <div class="col-sm-8 comment_text">{{ rating.comment }}<br><br>
          <div class="pull-right comment_date">{{ rating.datetime | date:'M - Y' }}</div></div>
          </div>
        </li>
      {% endfor %}
      </ul>
    </div>
    </div>

    <!-- commit form -->
    <div class="col-sm-4 col-xs-10 col-sm-offset-0 col-xs-offset-1">
    <br>
    <!--{% if rating_form.errors %}
    <div class="text-danger">Please correct the error{{ rating_form.errors|pluralize }} below.</div>
    {% endif %}-->
    {% if permission %}
    <form method="POST" action="." role='form' enctype="multipart/form-data"> {% csrf_token %}
      {{ rating_form | crispy }}
      <br>
      <div class="text-center">
      
        <button type = "submit" class = "btn btn-medium form_button">Submit</button>   
      {% else %} 
        <h3 class="bold">Comment Section</h3>
        <p class="small_font">You need to use the service in order to comment. Thanks!</p>
      {% endif %}

      </div>
    </form>
    </div>
  </div>
  <br>
</div>
{% endblock %}