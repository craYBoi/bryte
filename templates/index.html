{% extends "base.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block description %}
  <meta name="description" content="Custom and friendly headshot photography sessions for $25">
{% endblock %}


{% block stylesheet %}
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.0/animate.min.css">
{% endblock %}

{% block jumbotron %}
  <div class="jumbotron" id="jumbotron" style="background: url({% static 'img/hs_bg1.jpg' %}) no-repeat center; background-size: cover;">
<!--<div class="jumbotron background_grey" id='jumbotron'>-->
  <!--
    <div class="medium_padding"></div>
    <div class="row medium_padding medium_padding_bot">
      <div class="col-sm-8 col-sm-offset-2">
      <h1 class="bold text-center" style='color: #fff' id='tagline'>Affordably promote your business and create local student jobs</h1>
      </div>
    </div>

    <div class="row small_padding">
      <div class="col-sm-6 col-sm-offset-3 col-xs-10 col-xs-offset-1">
      <div class="row">
      <div class="col-xs-10 col-xs-offset-1">
      <ul class="list-inline white text-center light">
        <li class="light">Browse promotional photography and videography packages and book a local student to shoot your project</li>
      </ul>
      </div>
      </div>
      </div>
    </div>

    <div class="medium_padding"></div>
    <div class="small_padding text-center">
    
    <a href="#learn_more"><button class="btn btn-white large_font">Learn More</button></a>

    <a href="{% url 'packages' %}"><button class="btn btn-blue-big large_font">Get Started</button></a>
    </div>

    <div class="large_padding"></div>
    -->
    <div class="large_padding"></div>
    <div class="container medium_padding">
      <div class="row">

        <div class="col-sm-12 col-sm-offset-0 col-xs-10 col-xs-offset-1 text-center">
          <h1 class="white main_title">Fantastic headshot sessions <br>for <span class='bold'>$25</span></h1>
          <div class="small_padding"></div>
          <div class="small_padding"></div>
          <ul class="white list-inline">
            <li><i class="fa fa-check"></i> A custom experience tailored to you</li>
            <li><i class="fa fa-check"></i> Top photography environment</li>
            <li><i class="fa fa-check"></i> A price you can afford</li>
          </ul>
          <div class="large_padding"></div>
          {% if timeslots %}
          <a href="#book_form"><button class="btn-blue landing_button link_white medium_border_radius">
            Book your Headshot</button></a>
          {% else %}
            <a href="#signup_form" class="signup_button"><button class="btn-blue landing_button link_white medium_border_radius">Signup for Notification</button></a>
          {% endif %}
          <div class="small_padding"></div>
        </div>
      </div>
    </div>
    <div class="large_padding"></div>
  </div>
  <div id="learn_more"></div>
{% endblock %}



{% block features %}
  <div id="content_advantages">
    <div id="features">
    <!--<ul class="list-unstyled alternate_list">-->
      
    <!--
      <li>
        <div class="container medium_padding_bot">
          <h2 class="light_title text-center bold">Our Past Work</h2>
          <div class="row medium_padding">
            <div class="col-md-8 col-md-offset-0 col-xs-10 col-xs-offset-1">
                <div class="embed-container" style="margin: 0 auto;text-align:center;">
                  <iframe src="{{ featured_pg_one_vid.video }}" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                </div> 
            </div>
            <div class="col-md-4 col-md-offset-0 col-xs-10 col-xs-offset-1 all_padding_medium_except_top">
              <a href="{{ featured_pg_one.get_absolute_url }}">
              <div class="text-center">
                <img src="{{ featured_pg_one.profile.url }}" width="70px" class="img-circle">
                <div class="small_padding"></div>
                <p>{{ featured_pg_one.get_full_name }}<br>{{ featured_pg_one.school }}</p>
              </div>
              </a>

              <p class="light small_font">{{ featured_pg_one.description }}</p>
            </div>
          </div>
          <div class="medium_padding"></div>
          <hr>
          <div class="row medium_padding">
            <div class="col-md-4 col-md-offset-0 col-xs-10 col-xs-offset-1 all_padding_medium_except_top">
              <a href="{{ featured_pg_two.get_absolute_url }}">
              <div class="text-center">
                <img src="{{ featured_pg_two.profile.url }}" width="70px" class="img-circle">
                <div class="small_padding"></div>
                <p>{{ featured_pg_two.get_full_name }}<br>{{ featured_pg_two.school }}</p>
              
              </div>
              </a>
              
              <p class="light small_font">{{ featured_pg_two.description }}</p>
              
            </div>
            <div class="col-md-8 col-md-offset-0 col-xs-10 col-xs-offset-1">
                <div class="embed-container" style="margin: 0 auto;text-align:center;">
                  <iframe src="{{ featured_pg_two_vid.video }}" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                </div> 
            </div>
          </div>

        </div>
      </li>
  -->
      <div class="index_bring">
        <div class="row medium_padding medium_padding_bot">
          <div class="col-md-5 col-xs-12 flex_box_center">
            <img src="{% static 'img/bring.png' %}" width="650px">
          </div>
          <div class="col-md-7 col-xs-12 large_padding_bot">
          <div class="small_padding">
            <h2 class="xbig_font bold col-xs-10 col-xs-offset-1 bold medium_padding tight_title sm_neg_padding">We'll help you bring out your best self</h2>
            <ul class="small_padding col-xs-10 col-xs-offset-1 fancy_list index_list large_font">
              <li>You’ll have <span class="bold">20 minutes</span> to take as many photos as you want!</li>
              <li><span class="bold">Dictate your style.</span></li>
              <li><span class="bold">Knowledgeable</span> photographers</li>
              <li>Choose your favorite photo for <span class="bold">touchup</span></li>
            </ul>
          </div>
          </div>
        </div>
      </div>



      <div class="background_grey">
        <div class="row medium_padding medium_padding_bot">
          <div class="col-md-6 col-md-offset-1 col-xs-12 col-xs-offset-0">
            <div class="small_padding">
              <h2 class="xbig_font bold medium_padding tight_title col-xs-10 col-xs-offset-1 sm_neg_padding">Your private photography studio</h2>
              <div class="row">
              <ul class="small_padding col-xs-10 col-xs-offset-1 index_list large_font">
                <li><span class="bold">No lines!</span></li>
                <li><span>The <span class="bold">best</span> backdrop, lighting and camera equipment</span></span></li>
                <li><span>Light refreshments</span> and <span><span class="bold">friendly</span> photographers :)</span></li>
              </ul>
              </div>
            </div>
            <div id="index_past_work"></div>
            <div class="large_padding"></div>
          </div>

          <div class="col-md-5 col-xs-12 flex_box_center">
            <img src="{% static 'img/private.png' %}" width="650px">
          </div>
          
        </div>
      </div>



      <div class="background_light_pink">
      <div class="medium_padding"></div>
      <div class="container" id='index_past_work'>

        <h2 class="bold text-center feature_title">Headshots We've Done</h2>
        <div class="row small_padding_bot">
        </div>
        <div class="text-center row">
          <ul class="list-inline index_carousel">
            <li><img src="{% static 'img/hs2.jpg' %}" height='350px'></li>
            <li><img src="{% static 'img/hs3.jpg' %}" height='350px'></li>
            <li><img src="{% static 'img/michael.jpg' %}" height="350px"></li>
          </ul>
        </div>
      </div>
      <div class="small_padding"></div>
      <div class="medium_padding"></div>
      </div>


      <div class="background_pink large_font">
        <div class="container small_padding_bot medium_padding">
          <h2 class="feature_title text-center bold">How it Works</h2>
          <div class="row small_padding">
            <div class="col-xs-12">
              <div class="row">

                <div class="col-sm-4 text-center">
                  <img src="{% static 'img/process1.png' %}" class="img-responsive"> 
                  <div class="medium_padding"></div>
                  <h3 class="bold big_font">Book</h3>
                  <p class="light small_padding small_lh text-left">Choose a time that works for you and pay for it with just a few clicks! We will send you an email to confirm everything.</p>
                </div>   

                <div class="col-sm-4 text-center">
                  <img src="{% static 'img/process2.png' %}" class="img-responsive"> 
                  <div class="medium_padding"></div>
                  <h3 class="bold big_font">Smile</h3>
                  <p class="light small_padding small_lh text-left">Arrive at your location 5 minutes before your 20 minutes session is scheduled to begin. Then have fun at your fantastic headshot session!</p>
                </div>  

                <div class="col-sm-4 text-center">
                  <img src="{% static 'img/process3.png' %}" class="img-responsive"> 
                  <div class="medium_padding"></div>
                  <h3 class="bold big_font">Receive</h3>
                  <p class="light small_padding small_lh text-left">We'll send you a link to your headshot within 48 hours. There are no restrictions on how you can use your headshot.</p>
                </div>  
              </div>
            </div>
          </div>
          <div class="large_padding"></div>
          <p class="text-center small_padding small_font">Do you have questions? Email us @ <a href="mailto:hello@brytephoto.com" target="_top" class="red">hello@brytephoto.com</a> or Call us at 248-417-5852 for more information</p>
        </div>
        <div class="small_padding"></div>
      </div>





      <div class="row red_bg">

        <div class="col-sm-5 col-xs-10 col-xs-offset-1 col-sm-offset-1">
          <div class="medium_padding"></div>
          <div class="small_padding"></div>
          <div class="background_grey hs_border special_padding">
            <h2 class="bold xbig_font red">Fantastic Headshot sessions for $25!</h2>
            <p class="large_font red">Next Shoot @<br>{{ next_shoot.location }}<br>{{ next_shoot.time_format }}</p>
          </div>
          <div class="small_padding"></div>
          <div class="medium_padding"></div>
        </div> 


        <div class="col-sm-5 col-sm-offset-1 col-xs-10 col-xs-offset-1">
        {% if timeslots %}
        <div class="medium_padding"></div>
        <div class="text-center" id="book_form">
          <h3 class="white text-left">Your booking information</h3>
          <div class="row"></div>
            <form method="POST" action="{% url 'book_checkout' %}" class="book_form white">{% csrf_token %}
              <input type='text' name='book_name' class="form-control" id='book_name' required pattern="[a-zA-Z]{2,}(\s+[a-zA-z]{2,})+" placeholder='First & Last Name'>
              <div class="small_padding"></div>
              <input type='email' name='book_email' class="form-control" id='book_email' required pattern='\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}\b' placeholder="Email">
              <div class="small_padding"></div>
              {% if timeslots %}
              <select required name='book_time' class="form-control" id='book_time'>
                {% for timeslot in timeslots %}
                  <option value='{{ timeslot.pk }}'>{{ timeslot }}</option>
                {% endfor %}
              </select>
              {% else %}
              <label>All the slots are booked! Thanks!</label>
              {% endif %}
              <input type='hidden' name='book_photographer' value='{{ next_shoot.photographer.pk }}'>
              <div class="medium_padding"></div>
              <button class="btn-white xlarge_font tight_title" id="pay_button" type='submit'>Take me to payment</button>
              <p class="text-left xsmall_padding">(Only {{ timeslots.count }} time {% if timeslots.count == 1 %}
                slot
              {% else %}
                slots
              {% endif %} left!)</p>
            </form>
        </div>

        {% else %}
        <div id="signup_form" class="text-center red_bg">
          <span class='bold big_font'>Next photoshoot {% if timeslots %}
            @</span> <br>
            {{ next_shoot.location }}<br>
            {{ next_shoot.time_format }}<br>
          {% else %}
            <br><span class='light'>{SOLD OUT}</span>
          {% endif %}

          <h3 class="white large_padding col-sm-8 col-sm-offset-2">All the timeslots are booked!<br> However, the next shoot will be held soon!<br> Signup to get notification!</h3>

          <form method="POST" action="{% url 'book_signup' %}" class="book_form white">{% csrf_token %}
            <label class="light medium_padding">Email</label><br>
            <input type='email' name='signup_email' class="form-control" id='signup_email' required pattern='\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}\b'>
            <div class="small_padding"></div>
            <button class="btn-white large_font" id="signup_button" type='submit'>Signup</button>
          </form>
        </div>


        {% endif %}
          <div class="medium_padding_bot small_padding col-xs-10">
          <ol class="white index_landing_list sm_font neg_padding">
            <li>Pay $25 for your fantastic headshot to complete your booking</li>
            <li>Full refunds guaranteed</li>
            <li>Do you have questions? Email <a href="mailto:hello@brytephoto.com" target="_top" class="white">hello@brytephoto.com</a> or call us at 248-417-5852. Even if you just want to say Hi.</li>
          </ol>
          </div>
        </div> 
      </div>
      

      <ul class="background_grey list-inline" id="index_logos">
        <li class="col-md-3 col-xs-6 text-center"><img src="{% static 'img/brown.png' %}" height='70px'></li>
        <li class="col-md-3 col-xs-6 text-center"><img src="{% static 'logo/pbn.gif' %}" height="70px"></li>
        <li class="col-md-3 col-xs-6 text-center"><img src="{% static 'img/bvf.png' %}" height='70px'></li>
        <li class="col-md-3 col-xs-6 text-center"><img src="{% static 'img/blab.png' %}" height='70px'></li>
      </ul>


      {% if timeslots %}
        <div class="large_padding large_padding_bot">
          <div class="row">
          <p class="col-xs-6 col-xs-offset-3 small_padding_bot">Can't make it to our event? We are holding another event soon! Drop us your email and we'll let you know about our future headshot sessions.</p>
          
          </div>

          <div class="text-center">
          <div class="center_flex">
          <form method="POST" action="{% url 'book_signup' %}" class="book_form white">{% csrf_token %}
            <input type='email' name='signup_email' class="form-control" id='signup_email' required pattern='\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}\b' placeholder='Email'></form>
          </div>
          <div class="small_padding"></div>
          <button class="btn-white large_font signup_button" id="signup_button" type='submit'>Signup!</button>
          </div>

          <div class="row small_padding sm_font">
          <p class="col-xs-8 col-xs-offset-2 text-center">We won't send you any newsletters and we don't spam</p>
          </div>
        </div>      
      {% endif %}



<!--
      <li>
        <div class="container large_padding_bot large_padding">
          <h2 class="light_title text-center bold">How Can We Help?</h2>
          <div class="row">
            <div class="col-xs-10 col-xs-offset-1">
              <div class="row">

                <div class="col-sm-4 text-center">
                  <div class="medium_padding"></div>
                  <img src="{% static 'img/zappo.png' %}" class="img-responsive box_shadow_lg" style="border:5px solid #0098ee; border-radius: 20em;"> 
                  <div class="medium_padding"></div>
                  <h3>Zappo® Case</h3>
                  <p class="light">Zappos increased sales by 6-30% after using videos on item product pages</p>
                </div>   

                
                <div class="col-sm-4 text-center">
                  <div class="medium_padding"></div>
                  <img src="{% static 'img/airbnbstat.png' %}" class="img-responsive box_shadow_lg" style="border:5px solid #0098ee; border-radius: 20em;"> 
                  <div class="medium_padding"></div>
                  <h3>Airbnb Case</h3>
                  <p class="light">This graph shows Airbnb’s revenue, the arrow indicates when they start using professional photographers</p>
                </div>  

                <div class="col-sm-4 text-center">
                  <div class="medium_padding"></div>
                  <img src="{% static 'img/fbstat.png' %}" class="img-responsive box_shadow_lg" style="border:5px solid #0098ee; border-radius: 20em;"> 
                  <div class="medium_padding"></div>
                  <h3>The Power of Facebook</h3>
                  <p class="light">In November, 2015, Facebook hit 8 billion videos views every day.</p>
                </div>  
              </div>
            </div>
          </div>
        </div>
      </li>
-->
<!--
      <li>
        <div class="large_padding"></div>
        <div class="container">
          <div class="row">
            <div class="col-xs-10 col-xs-offset-1" style="text-align:center;">
              <h2 class="light_title">Find your photography need</h2>
              <p class="xsmall_padding col-xs-8 col-xs-offset-2 light">We detail what exactly what your <a href="{% url 'packages' %}" class="blue">package</a> offers</p>
              <img src="{% static 'img/ProcessFour.png' %}" class="img-responsive loading">
            </div>
          </div>
        </div>
      </li>

      <li>
        <div class="container">
          <div class="row">
            <div class="col-xs-10 col-xs-offset-1 large_padding" style="text-align:center;">
              <h2 class="light_title">Compare our photographers</h2>
              <p class="xsmall_padding col-xs-8 col-xs-offset-2 light">Find the college <a href="{% url 'photographers' %}" class="blue">photographer</a> with the right package, price and experience for you</p>
              <img src="{% static 'img/ProcessOne.png' %}" class="img-responsive loading">
            </div>
          </div>
        </div>
      </li>
      <li>
        <div class="container" id="process_three">
          <div class="row">
            <div class="col-xs-10 col-xs-offset-1 large_padding" style="text-align:center;">
              <h2 class="light_title">Book without the hassle</h2>
              <p class="col-xs-6 col-xs-offset-3 xsmall_padding light">Reserve a time that works for you and your photographer instantly. <span class='blue'>We are currently in Rhode Island</span></p>
              <img src="{% static 'img/ProcessTwo.png' %}" class="img-responsive">
            </div>
          </div>
        </div>
      </li> 

      <li>
        <div class="container">
          <div class="row">
            <div class="col-xs-10 col-xs-offset-1 large_padding" style="text-align:center;">
              <h2 class="light_title">Pay after the work is done</h2>
              <p class="xsmall_padding col-xs-6 col-xs-offset-3 light">We use <a href="https://stripe.com/" class="blue">© Stripe</a>, the same platform used by Lyft,<br>Kickstarter and many other companies</p>
              <img src="{% static 'img/stripe.png' %}" class="img-responsive">
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
-->
<!--</ul>-->


<!-- modal -->
<a id="modal_link" href="#animatedModal" hidden></a>
<div id="animatedModal">
  <!--THIS IS IMPORTANT! to close the modal, the class name has to match the name given on the ID  class="close-animatedModal" -->
  <div class="close-animatedModal text-center" id="modal_close_link"> 
      <div class="medium_padding"></div>
      <a href="" class="modal_close"><i class="white glyphicon glyphicon-remove-circle xbig_font"></i></a>
  </div>

  <div class="white text-center medium_padding large_font">      
  <p id="modal_content"></p>
  </div>


</div>


<!-- loader -->
<div id="loader-wrapper" hidden>
  <div id="loader" class="text-center"><img src="{% static 'logo/loading.svg' %}"></div>
</div>


{% endblock %}

{% block about %}
<!--
    <div class="jumbotron" style="background: url({% static 'img/store_bg3.jpg' %}) center; background-size: cover; text-align: center;">
      <h2 class="text-center bold main_title white medium_padding medium_padding_bot">About Us</h2>
    </div>
      

    <div id="content_about" class="content_wrapper container">

    <div class="row small_padding">
      <div class="col-md-4 col-md-offset-1 col-xs-10 col-xs-offset-1">
        <div class="row">
          <div class="text-center">
            <img src="{% static 'img/michael.jpg' %}" width="40%" class="img-circle">
            <br><br>
            <h4 class="bold">Michael Snower</h4>
          </div>
        </div>
        <p class="small_font small_padding light">Michael studies business at Brown University. He and Ben came up with the idea for Bryte when Michael had a hard time finding affordable and high quality headshot photographers. In his spare time, he plays the guitar and teaches yoga.</p>
      </div>
      <div class="col-md-4 col-md-offset-2 col-xs-10 col-xs-offset-1">
        <div class="row">
          <div class="text-center">
            <img src="{% static 'img/ben.jpg' %} " width="40%" class="img-circle">
            <br>
            <br>
            <h4 class="bold">Benjamin Bao</h4>
          </div>
        </div>
        <p class="small_font small_padding light">Ben is pursuing a Computer Science Master's degree at Brown University. Ben is passionate about designing and building products that will make people's life better. In his spare time, Ben skateboards and makes music.</p>
      </div>

    </div>
  </div>  
  -->
{% endblock %}

{% block script %}
  <script src="https://checkout.stripe.com/checkout.js"></script>
  <script src="{% static 'js/animatedModal.min.js' %}"></script>
  <script type="text/javascript">
  function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
var csrftoken = getCookie('csrftoken');
  </script>
{% endblock %}
{% block jquery %}
    // modal 
    $("#modal_link").animatedModal({
      animatedIn: 'zoomInUp',
      animatedOut: 'bounceOutDown',
      color: '#c94848'
    });

    $('#modal_close_link').click(function(){
      location.reload();
    })


    // ajax loading animation
    $loading = $("#loader-wrapper")

    .ajaxStart(function () {
      $loading.show();
    })

    .ajaxStop(function () {
      $loading.hide();
    });




    var csrftoken = getCookie('csrftoken');

    function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }


    $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
            }
        }
    });


    var handler = StripeCheckout.configure({
      key: '{{ publish_key }}',
      image: '{% static "logo/logo-square.png" %}',
      locale: 'auto',
      token: function(token) {
        // Use the token to create the charge with a server-side script.
        // You can access the token ID with `token.id`
        $.ajax({
          url: '{% url "book_checkout" %}',
          type: 'POST',
          data: {
            token: token.id,
            name: $('#book_name').val(),
            time: $('#book_time').val(),  
            email: $('#book_email').val(),
            photographer: {{ next_shoot.photographer.pk }}
          },

          success: function(data){
            $("#modal_content").html(data['successMsg']);
            $("#modal_link").trigger('click');
          },

          failure: function(data) {
            $("#modal_content").html(data['successMsg'])
            $("#modal_link").trigger('click')
          }
        });
      }
    });

    
    $('#pay_button').on('click', function(e) {


      // Open Checkout with further options

      // validate with html form
      if (document.getElementById('book_email').checkValidity() &&
        document.getElementById('book_name').checkValidity() && 
        document.getElementById('book_time').checkValidity()) {
        handler.open({
          name: 'Bryte Photo Inc',
          description: 'Headshot',
          amount: 2500
        });
        e.preventDefault();
      } 
      
    });


    $('#signup_button').on('click', function(e){
      e.preventDefault();
      $.ajax({
        url: '{% url "book_signup" %}',
        type: 'POST',
        data: {
          email: $('#signup_email').val()
        },

        success: function(data){
          $("#modal_content").html(data['successMsg'])
          $("#modal_link").trigger('click')
        },

        failure: function(data){
          $("#modal_content").html('Something wrong happened, please try again.')
          $("#modal_link").trigger('click')
        }
      });
    });


    // Close Checkout on page navigation
    $(window).on('popstate', function() {
      handler.close();
    });
{% endblock %}